import { SOEInputStream } from "../../h1z1-server.js";
import { DEFAULT_CRYPTO_KEY } from "../../out/utils/constants";

const InputDataExample = Buffer.from([
  158, 81, 193, 91, 70, 213, 143, 132, 123, 240, 166, 129, 147, 42, 115, 105,
  42, 40, 13, 152, 175, 61, 89, 212, 237, 29, 223, 239, 24, 118, 117, 144, 231,
  12, 243, 87, 119, 9, 108, 134, 210, 27, 72, 86, 168, 25, 228, 160, 130, 53,
  99, 116, 94, 105, 55, 115, 148, 19, 213, 32, 35, 203, 43, 188, 77, 207, 143,
  24, 172, 191, 120, 170, 20, 242, 255, 223, 90, 79, 88, 23, 128, 24, 53, 92,
  229, 59, 117, 95, 188, 73, 180, 74, 97, 43, 235, 68, 123, 206, 128, 203, 55,
  96, 163, 153, 54, 244, 68, 40, 187, 117, 231, 105, 186, 255, 20, 126, 109,
  124, 41, 255, 215, 40, 8, 197, 175, 123, 50, 216, 35, 164, 211, 81, 32, 87,
  96, 132, 31
]);
const InputFragExample1 = Buffer.from([
  0, 0, 5, 112, 170, 183, 184, 67, 241, 112, 243, 1, 140, 19, 31, 4, 31, 191,
  220, 127, 62, 94, 189, 217, 78, 17, 205, 137, 253, 164, 100, 221, 204, 187,
  163, 128, 71, 205, 196, 141, 8, 103, 48, 186, 87, 243, 181, 253, 213, 65, 172,
  237, 56, 180, 63, 172, 20, 49, 193, 4, 97, 148, 122, 41, 42, 203, 200, 88, 88,
  21, 8, 111, 45, 144, 49, 17, 66, 252, 111, 175, 11, 247, 140, 174, 100, 188,
  158, 130, 70, 240, 148, 158, 74, 77, 203, 94, 78, 143, 217, 35, 5, 165, 8, 67,
  35, 1, 184, 243, 197, 1, 81, 20, 31, 127, 175, 131, 24, 7, 89, 241, 124, 172,
  55, 49, 162, 146, 241, 16, 219, 202, 16, 212, 65, 56, 174, 220, 172, 53, 103,
  225, 224, 184, 50, 177, 214, 20, 224, 17, 111, 226, 139, 22, 49, 5, 94, 133,
  76, 70, 56, 150, 95, 245, 28, 80, 245, 2, 65, 70, 3, 67, 209, 153, 175, 172,
  104, 22, 4, 35, 237, 178, 238, 9, 54, 60, 143, 179, 4, 109, 34, 151, 46, 116,
  7, 34, 167, 6, 87, 12, 250, 139, 203, 127, 226, 101, 68, 98, 230, 164, 20, 76,
  120, 216, 123, 145, 75, 169, 220, 209, 254, 163, 108, 125, 113, 200, 198, 205,
  253, 219, 218, 83, 29, 208, 120, 165, 31, 194, 47, 125, 96, 97, 0, 209, 167,
  36, 23, 26, 85, 226, 34, 129, 215, 174, 182, 63, 76, 176, 253, 185, 140, 38,
  66, 53, 143, 112, 91, 93, 244, 209, 201, 41, 166, 231, 65, 205, 57, 130, 43,
  27, 186, 96, 184, 29, 234, 254, 141, 172, 238, 34, 146, 134, 240, 193, 238,
  94, 253, 143, 86, 183, 177, 153, 248, 142, 215, 41, 55, 22, 76, 26, 87, 23,
  196, 86, 223, 33, 198, 15, 23, 144, 40, 19, 57, 185, 246, 110, 160, 20, 202,
  27, 14, 247, 133, 207, 118, 96, 215, 151, 12, 84, 42, 158, 131, 146, 34, 19,
  238, 130, 121, 227, 254, 140, 225, 198, 33, 49, 88, 85, 47, 173, 34, 30, 212,
  230, 105, 66, 136, 159, 178, 44, 159, 229, 112, 107, 129, 30, 92, 252, 98,
  217, 121, 202, 160, 165, 13, 255, 23, 216, 96, 92, 5, 54, 209, 224, 119, 212,
  240, 209, 178, 158, 35, 95, 18, 243, 185, 254, 136, 198, 4, 153, 172, 3, 99,
  0, 8, 65, 207, 102, 108, 188, 61, 87, 132, 35, 148, 130, 124, 215, 73, 129,
  116, 129, 18, 99, 98, 208, 46, 200, 107, 158, 227, 162, 212, 169, 21, 144, 35,
  12, 243, 47, 178, 195, 135, 204, 36, 20, 222, 179, 87, 222, 231, 251, 252,
  134, 88, 102, 220, 192, 69, 200, 16, 147, 10, 74, 197, 120, 11, 176, 215, 99,
  118, 29, 248, 35, 149, 207, 138, 71, 45, 178, 97, 143, 217, 12, 131, 147, 255,
  207, 240, 69, 245, 87, 164, 168, 178, 127, 102, 55, 230, 115
]);
const InputFragExample2 = Buffer.from([
  200, 255, 68, 95, 245, 4, 38, 27, 82, 96, 23, 125, 213, 126, 189, 182, 86, 87,
  46, 109, 93, 181, 76, 71, 69, 166, 77, 141, 154, 105, 69, 51, 48, 237, 139,
  21, 31, 237, 110, 250, 159, 126, 186, 74, 28, 255, 181, 67, 215, 206, 101,
  202, 37, 27, 219, 134, 205, 155, 151, 1, 159, 182, 255, 15, 96, 134, 103, 43,
  7, 184, 16, 42, 78, 125, 161, 45, 160, 160, 86, 242, 180, 215, 126, 240, 9,
  133, 102, 216, 94, 142, 136, 100, 0, 240, 47, 200, 82, 163, 70, 14, 191, 124,
  71, 167, 23, 18, 138, 198, 68, 255, 235, 70, 7, 120, 193, 133, 58, 190, 119,
  216, 179, 155, 206, 156, 206, 34, 87, 49, 236, 96, 202, 132, 19, 167, 27, 169,
  98, 76, 142, 77, 239, 123, 9, 60, 36, 163, 116, 19, 248, 53, 24, 215, 194, 77,
  174, 119, 149, 224, 48, 20, 53, 17, 231, 148, 95, 168, 201, 220, 110, 38, 173,
  208, 96, 214, 152, 187, 240, 83, 137, 104, 247, 252, 91, 111, 160, 251, 8,
  228, 102, 100, 184, 187, 143, 204, 49, 131, 140, 212, 169, 17, 137, 177, 248,
  205, 236, 178, 13, 66, 49, 2, 234, 122, 56, 230, 103, 124, 42, 223, 228, 242,
  239, 7, 8, 217, 241, 144, 135, 20, 174, 66, 107, 111, 192, 155, 54, 115, 240,
  255, 178, 230, 249, 21, 182, 203, 228, 42, 161, 249, 168, 50, 47, 27, 21, 250,
  157, 0, 27, 86, 51, 184, 93, 63, 18, 155, 16, 81, 38, 220, 150, 100, 44, 135,
  229, 67, 224, 233, 17, 139, 44, 132, 179, 222, 210, 181, 61, 222, 141, 107,
  250, 15, 154, 135, 99, 90, 205, 24, 255, 242, 184, 144, 144, 39, 215, 255, 63,
  94, 233, 70, 164, 22, 205, 72, 175, 0, 2, 251, 204, 159, 60, 200, 71, 48, 29,
  64, 78, 137, 115, 103, 225, 250, 193, 17, 199, 198, 15, 126, 213, 179, 224,
  146, 6, 248, 47, 209, 15, 90, 34, 140, 179, 40, 243, 149, 242, 247, 138, 63,
  114, 188, 172, 243, 169, 179, 183, 171, 152, 15, 157, 8, 50, 85, 40, 6, 214,
  100, 83, 94, 112, 48, 213, 68, 86, 250, 231, 55, 232, 44, 113, 186, 65, 103,
  194, 187, 107, 199, 193, 143, 250, 28, 36, 20, 67, 172, 87, 131, 241, 223,
  176, 138, 210, 159, 206, 57, 65, 190, 205, 77, 103, 70, 178, 79, 17, 66, 5,
  112, 216, 180, 145, 18, 185, 240, 70, 111, 17, 36, 141, 30, 147, 138, 100,
  223, 161, 52, 2, 29, 131, 3, 194, 196, 234, 106, 87, 81, 163, 104, 142, 191,
  0, 145, 104, 132, 92, 139, 237, 154, 60, 229, 208, 43, 64, 43, 177, 193, 82,
  4, 218, 244, 118, 234, 215, 245, 98, 253, 19, 135, 211, 2, 120, 111, 241, 18,
  111, 238, 0, 107, 185, 190, 92, 46, 177, 51, 84, 28, 237, 70, 155, 1, 119, 74
]);
const InputFragExample3 = Buffer.from([
  2, 17, 135, 182, 241, 139, 216, 244, 187, 117, 0, 3, 229, 75, 56, 104, 130,
  34, 53, 41, 254, 74, 61, 58, 90, 116, 89, 94, 58, 186, 245, 3, 12, 212, 176,
  21, 92, 196, 73, 179, 216, 44, 120, 39, 141, 154, 235, 168, 82, 163, 188, 118,
  136, 146, 16, 45, 133, 171, 3, 89, 81, 182, 168, 214, 182, 0, 24, 52, 169, 78,
  37, 181, 29, 182, 222, 86, 234, 161, 173, 109, 243, 217, 91, 8, 227, 239, 172,
  247, 153, 110, 47, 69, 11, 44, 3, 121, 50, 9, 11, 210, 155, 204, 183, 84, 129,
  226, 210, 86, 248, 74, 123, 218, 106, 48, 60, 104, 130, 42, 171, 202, 103,
  128, 209, 31, 232, 191, 12, 1, 29, 211, 152, 207, 64, 91, 159, 191, 227, 192,
  13, 181, 238, 127, 214, 71, 95, 5, 142, 65, 184, 112, 125, 247, 206, 238, 240,
  189, 24, 225, 42, 23, 236, 192, 234, 219, 108, 125, 117, 36, 19, 222, 55, 54,
  96, 188, 231, 131, 11, 115, 63, 96, 5, 135, 105, 195, 206, 114, 186, 88, 40,
  33, 182, 162, 26, 213, 38, 19, 113, 239, 162, 101, 23, 98, 105, 2, 7, 12, 155,
  196, 49, 68, 250, 52, 126, 208, 240, 84, 41, 48, 195, 159, 70, 203, 192, 34,
  121, 156, 128, 63, 167, 154, 166, 238, 38, 154, 135, 147, 71, 105, 47, 34, 37,
  87, 45, 213, 106, 11, 87, 229, 70, 135, 54, 189, 98, 122, 137, 88, 17, 62, 40,
  163, 249, 44, 23, 201, 113, 104, 193, 75, 14, 196, 41, 183, 97, 109, 110, 41,
  221, 80, 71, 249, 209, 176, 65, 73, 72, 13, 209, 13, 162, 148, 175, 231, 12,
  172, 29, 1, 221, 213, 46, 73, 167, 206, 218, 56, 102, 33, 38, 210, 235, 161,
  141, 27, 35, 140, 64, 204, 111, 228, 212, 113, 246, 104, 225, 224, 119, 191,
  130, 228, 181, 218, 159, 130, 225, 4, 4, 156, 127, 22, 68, 42, 155, 15, 150,
  49, 171, 172, 98, 95, 177, 69, 54, 91, 16, 74, 182, 137, 72, 106, 191, 13,
  246, 154, 24, 199, 113, 203, 37, 79, 244, 176, 122, 72, 156, 119, 49, 136,
  207, 174, 77, 224
]);

const fragExamples = [InputFragExample1, InputFragExample2, InputFragExample3];
const loops = 64000;

const inputStream = new SOEInputStream(
  Buffer.from(DEFAULT_CRYPTO_KEY, "base64")
);

console.log("SOEINPUT");

console.time("genSequenceForFragBench");
for (let index = 0; index < loops; index++) {
  fragExamples[index % 3];
}
console.timeEnd("genSequenceForFragBench");

console.time("fragment");
for (let index = 0; index < loops; index++) {
  inputStream.write(fragExamples[index % 3], index, true);
}
console.timeEnd("fragment");

const inputStreamEnc = new SOEInputStream(
  Buffer.from(DEFAULT_CRYPTO_KEY, "base64")
);

inputStreamEnc.setEncryption(true);

console.time("fragmentWithEncryption");
for (let index = 0; index < loops; index++) {
  inputStreamEnc.write(fragExamples[index % 3], index, true);
}
console.timeEnd("fragmentWithEncryption");

const inputStreamData = new SOEInputStream(
  Buffer.from(DEFAULT_CRYPTO_KEY, "base64")
);

console.time("data");
for (let index = 0; index < loops; index++) {
  inputStreamData.write(InputDataExample, index, false);
}
console.timeEnd("data");

const inputStreamEncData = new SOEInputStream(
  Buffer.from(DEFAULT_CRYPTO_KEY, "base64")
);

inputStreamEncData.setEncryption(true);

console.time("dataWithEncryption");
for (let index = 0; index < loops; index++) {
  inputStreamEncData.write(InputDataExample, index, false);
}
console.timeEnd("dataWithEncryption");
